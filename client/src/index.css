@import url('https://fonts.googleapis.com/css2?family=DM+Sans:ital,opsz,wght@0,9..40,100..1000;1,9..40,100..1000&family=Outfit:wght@300;400;500;600;700;800&display=swap');

@tailwind base;
@tailwind components;
@tailwind utilities;

/* ============================================================
   CLAYMORPHISM DESIGN TOKENS — GapNight
   ============================================================ */
:root {
  --font-sans: 'DM Sans', sans-serif;
  --font-display: 'Outfit', sans-serif;

  /* ── Claymorphism Sky Palette ── */
  --clay-sky-start:   #c4cef0;
  --clay-sky-mid:     #d4dcf8;
  --clay-sky-end:     #dfe6ff;
  --clay-cloud:       rgba(255,255,255,0.72);
  --clay-cloud-solid: #ffffff;

  /* ── Brand blues ── */
  --clay-primary:        #4A8FE7;
  --clay-primary-dark:   #2E6DC0;
  --clay-primary-light:  #7BB3F5;
  --clay-primary-glow:   rgba(74,143,231,0.35);

  /* ── Text ── */
  --clay-text:       #1A2B4A;
  --clay-text-muted: #6B7A9A;
  --clay-text-light: #9BA9C0;

  /* ── Semantic ── */
  --clay-badge-deal:    #FF4747;      /* % OFF badge */
  --clay-badge-gn:      #10B981;      /* Gap Night badge */
  --clay-badge-gn-bg:   rgba(16,185,129,0.12);
  --clay-badge-amber:   #F59E0B;
  --clay-badge-amber-bg: rgba(245,158,11,0.12);
  --clay-success:       #10B981;
  --clay-warning:       #F59E0B;
  --clay-danger:        #EF4444;

  /* ── Clay shadows ── */
  --clay-shadow-xs:  0 2px 8px rgba(100,120,200,0.10);
  --clay-shadow-sm:  0 4px 16px rgba(100,120,200,0.13), 0 1px 4px rgba(100,120,200,0.08);
  --clay-shadow-md:  0 8px 32px rgba(100,120,200,0.16), 0 2px 8px rgba(100,120,200,0.10);
  --clay-shadow-lg:  0 16px 48px rgba(100,120,200,0.20), 0 4px 16px rgba(100,120,200,0.12);
  --clay-shadow-xl:  0 24px 64px rgba(100,120,200,0.24), 0 8px 24px rgba(100,120,200,0.14);
  --clay-shadow-btn: 0 6px 24px rgba(74,143,231,0.40), 0 2px 8px rgba(74,143,231,0.20);
  --clay-shadow-btn-hover: 0 10px 32px rgba(74,143,231,0.50), 0 4px 12px rgba(74,143,231,0.28);
  --clay-shadow-inset: inset 0 2px 8px rgba(100,120,200,0.08);

  /* ── Border radius scale ── */
  --clay-radius-xs:  8px;
  --clay-radius-sm:  12px;
  --clay-radius-md:  16px;
  --clay-radius-lg:  24px;
  --clay-radius-xl:  32px;
  --clay-radius-2xl: 40px;
  --clay-radius-pill: 9999px;

  /* ── shadcn/ui compatibility layer ── */
  --background: 222 40% 97%;
  --foreground: 222 47% 15%;

  --primary: 214 72% 57%;
  --primary-foreground: 0 0% 100%;

  --secondary: 220 30% 94%;
  --secondary-foreground: 222 47% 15%;

  --muted: 220 30% 93%;
  --muted-foreground: 222 22% 45%;

  --accent: 214 72% 94%;
  --accent-foreground: 214 72% 35%;

  --destructive: 0 84% 60%;
  --destructive-foreground: 0 0% 100%;

  --border: 220 25% 87%;
  --input: 220 25% 87%;
  --ring: 214 72% 57%;

  --card: 0 0% 100%;
  --card-foreground: 222 47% 15%;

  --popover: 0 0% 100%;
  --popover-foreground: 222 47% 15%;

  --radius: 1rem;
}

.dark {
  --background: 222 47% 8%;
  --foreground: 210 40% 95%;

  --primary: 214 72% 60%;
  --primary-foreground: 222 47% 8%;

  --secondary: 217 33% 17%;
  --secondary-foreground: 210 40% 95%;

  --muted: 217 33% 17%;
  --muted-foreground: 215 20% 60%;

  --accent: 214 60% 18%;
  --accent-foreground: 214 72% 70%;

  --destructive: 0 63% 51%;
  --destructive-foreground: 0 0% 100%;

  --border: 217 33% 22%;
  --input: 217 33% 22%;
  --ring: 214 72% 60%;

  --card: 222 47% 11%;
  --card-foreground: 210 40% 95%;

  --popover: 222 47% 11%;
  --popover-foreground: 210 40% 95%;

  --clay-sky-start:   #1a2440;
  --clay-sky-mid:     #1e2850;
  --clay-sky-end:     #22204a;
  --clay-cloud:       rgba(255,255,255,0.06);
  --clay-text:        #e2e8f8;
  --clay-text-muted:  #8492b4;
}

/* ============================================================
   GLOBAL RESET
   ============================================================ */
html, body {
  overflow-x: hidden;
  width: 100%;
  max-width: 100vw;
}

@layer base {
  html { scroll-behavior: smooth; }

  body {
    @apply antialiased;
    font-family: var(--font-sans);
    background-color: hsl(var(--background));
    color: hsl(var(--foreground));
  }

  #root { @apply min-h-screen flex flex-col; }

  .min-h-screen:has(footer) {
    display: flex !important;
    flex-direction: column !important;
    flex: 1 !important;
  }

  h1, h2, h3, h4, h5, h6 {
    font-family: var(--font-display);
    @apply font-bold tracking-tight;
    color: var(--clay-text);
  }
}

/* ============================================================
   CLAYMORPHISM UTILITIES
   ============================================================ */
@layer utilities {
  /* ── Scrollbar ── */
  .no-scrollbar::-webkit-scrollbar { display: none; }
  .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }

  /* ── Clay shadows ── */
  .shadow-clay-xs  { box-shadow: var(--clay-shadow-xs); }
  .shadow-clay-sm  { box-shadow: var(--clay-shadow-sm); }
  .shadow-clay     { box-shadow: var(--clay-shadow-md); }
  .shadow-clay-lg  { box-shadow: var(--clay-shadow-lg); }
  .shadow-clay-xl  { box-shadow: var(--clay-shadow-xl); }
  .shadow-clay-btn { box-shadow: var(--clay-shadow-btn); }
  .shadow-clay-inset { box-shadow: var(--clay-shadow-inset); }

  /* ── Clay card base ── */
  .clay-card {
    background: rgba(255,255,255,0.88);
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
    border-radius: var(--clay-radius-lg);
    box-shadow: var(--clay-shadow-md);
    border: 1px solid rgba(255,255,255,0.70);
  }

  .clay-card-sm {
    background: rgba(255,255,255,0.88);
    backdrop-filter: blur(16px);
    -webkit-backdrop-filter: blur(16px);
    border-radius: var(--clay-radius-md);
    box-shadow: var(--clay-shadow-sm);
    border: 1px solid rgba(255,255,255,0.70);
  }

  /* ── Clay panel (hero/modal sized) ── */
  .clay-panel {
    background: rgba(255,255,255,0.95);
    backdrop-filter: blur(24px);
    -webkit-backdrop-filter: blur(24px);
    border-radius: var(--clay-radius-xl);
    box-shadow: var(--clay-shadow-xl);
    border: 1px solid rgba(255,255,255,0.85);
  }

  /* ── Clay button primary ── */
  .clay-btn {
    background: linear-gradient(135deg, var(--clay-primary) 0%, var(--clay-primary-dark) 100%);
    color: #ffffff;
    border-radius: var(--clay-radius-pill);
    box-shadow: var(--clay-shadow-btn);
    border: none;
    font-weight: 600;
    transition: box-shadow 0.2s ease, transform 0.2s ease;
  }
  .clay-btn:hover {
    box-shadow: var(--clay-shadow-btn-hover);
    transform: translateY(-1px);
  }
  .clay-btn:active { transform: translateY(0); }

  /* ── Clay button secondary (ghost pill) ── */
  .clay-btn-ghost {
    background: rgba(255,255,255,0.80);
    color: var(--clay-text);
    border-radius: var(--clay-radius-pill);
    box-shadow: var(--clay-shadow-sm);
    border: 1px solid rgba(255,255,255,0.70);
    font-weight: 500;
    transition: box-shadow 0.2s ease, background 0.2s ease;
  }
  .clay-btn-ghost:hover {
    background: rgba(255,255,255,0.95);
    box-shadow: var(--clay-shadow-md);
  }

  /* ── Clay chip (filter pill) ── */
  .clay-chip {
    background: rgba(255,255,255,0.75);
    color: var(--clay-text-muted);
    border-radius: var(--clay-radius-pill);
    box-shadow: var(--clay-shadow-xs);
    border: 1px solid rgba(255,255,255,0.70);
    font-size: 0.8125rem;
    font-weight: 500;
    padding: 6px 16px;
    transition: all 0.18s ease;
    cursor: pointer;
    display: inline-flex;
    align-items: center;
    gap: 6px;
  }
  .clay-chip:hover {
    background: rgba(255,255,255,0.95);
    box-shadow: var(--clay-shadow-sm);
    color: var(--clay-text);
  }
  .clay-chip.active {
    background: var(--clay-primary);
    color: #ffffff;
    box-shadow: var(--clay-shadow-btn);
    border-color: transparent;
  }

  /* ── Clay input ── */
  .clay-input {
    background: rgba(255,255,255,0.80);
    border-radius: var(--clay-radius-pill);
    border: 1.5px solid rgba(255,255,255,0.70);
    box-shadow: var(--clay-shadow-inset), var(--clay-shadow-xs);
    padding: 10px 18px;
    font-size: 0.9375rem;
    color: var(--clay-text);
    outline: none;
    transition: border-color 0.18s ease, box-shadow 0.18s ease;
    width: 100%;
  }
  .clay-input:focus {
    border-color: var(--clay-primary-light);
    box-shadow: var(--clay-shadow-inset), 0 0 0 3px var(--clay-primary-glow);
  }
  .clay-input::placeholder { color: var(--clay-text-light); }

  /* ── Sky cloud background ── */
  .clay-sky {
    background: linear-gradient(160deg, var(--clay-sky-start) 0%, var(--clay-sky-mid) 45%, var(--clay-sky-end) 100%);
    position: relative;
    overflow: hidden;
  }

  /* ── Badges ── */
  .clay-badge-deal {
    background: var(--clay-badge-deal);
    color: #ffffff;
    font-weight: 700;
    font-size: 0.6875rem;
    border-radius: var(--clay-radius-sm);
    padding: 3px 8px;
    box-shadow: 0 2px 8px rgba(255,71,71,0.35);
    letter-spacing: 0.02em;
    display: inline-block;
  }
  .clay-badge-gn {
    background: rgba(255,255,255,0.90);
    color: var(--clay-badge-gn);
    font-weight: 700;
    font-size: 0.6875rem;
    border-radius: var(--clay-radius-pill);
    padding: 3px 10px;
    box-shadow: var(--clay-shadow-xs);
    border: 1px solid rgba(16,185,129,0.25);
    display: inline-flex;
    align-items: center;
    gap: 4px;
  }
  .clay-badge-rating {
    background: rgba(255,255,255,0.92);
    color: var(--clay-text);
    font-weight: 700;
    font-size: 0.75rem;
    border-radius: var(--clay-radius-pill);
    padding: 4px 10px;
    box-shadow: var(--clay-shadow-sm);
    border: 1px solid rgba(255,255,255,0.80);
    display: inline-flex;
    align-items: center;
    gap: 3px;
  }
  .clay-badge-approval {
    background: rgba(245,158,11,0.10);
    color: #92400E;
    border: 1px solid rgba(245,158,11,0.25);
    font-size: 0.6875rem;
    font-weight: 600;
    border-radius: var(--clay-radius-sm);
    padding: 2px 8px;
    display: inline-flex;
    align-items: center;
    gap: 3px;
  }

  /* ── Cloud decorations (CSS-only) ── */
  .clay-cloud-blob {
    position: absolute;
    border-radius: 50%;
    background: rgba(255,255,255,0.55);
    filter: blur(32px);
    pointer-events: none;
  }

  /* ── Elevation hover lift ── */
  .clay-hover {
    transition: transform 0.2s ease, box-shadow 0.2s ease;
  }
  .clay-hover:hover {
    transform: translateY(-3px);
    box-shadow: var(--clay-shadow-lg);
  }

  /* ── glass-card legacy ── */
  .glass-card {
    @apply bg-white/80 backdrop-blur-md border border-white/20;
    box-shadow: var(--clay-shadow-md);
  }
}

/* ============================================================
   ANIMATIONS
   ============================================================ */
@keyframes fade-in {
  from { opacity: 0; transform: translateY(10px); }
  to   { opacity: 1; transform: translateY(0); }
}
.animate-fade-in { animation: fade-in 0.4s ease-out forwards; }

@keyframes slide-up {
  from { transform: translateY(100%); }
  to   { transform: translateY(0); }
}
.animate-slide-up { animation: slide-up 0.3s ease-out forwards; }

@keyframes cloud-drift-1 {
  0%, 100% { transform: translateX(0) scale(1); }
  50%       { transform: translateX(40px) scale(1.04); }
}
@keyframes cloud-drift-2 {
  0%, 100% { transform: translateX(0) scale(1); }
  50%       { transform: translateX(-30px) scale(1.02); }
}
@keyframes cloud-drift-3 {
  0%, 100% { transform: translateX(0) translateY(0); }
  33%       { transform: translateX(20px) translateY(-10px); }
  66%       { transform: translateX(-15px) translateY(8px); }
}

.animate-cloud-1 { animation: cloud-drift-1 18s ease-in-out infinite; }
.animate-cloud-2 { animation: cloud-drift-2 24s ease-in-out infinite; }
.animate-cloud-3 { animation: cloud-drift-3 30s ease-in-out infinite; }

@keyframes ticker {
  0%   { transform: translateX(0); }
  100% { transform: translateX(-50%); }
}
.animate-ticker { animation: ticker 32s linear infinite; }

@keyframes float-y {
  0%, 100% { transform: translateY(0px); }
  50%       { transform: translateY(-12px); }
}
.animate-float { animation: float-y 6s ease-in-out infinite; }

/* ============================================================
   MAP
   ============================================================ */
.custom-marker { background: transparent; border: none; }

.leaflet-popup-content-wrapper {
  padding: 0;
  border-radius: 1rem;
  box-shadow: var(--clay-shadow-md);
}
.leaflet-popup-content { margin: 0; }
